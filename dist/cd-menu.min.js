window.cdMenuConfig||(window.cdMenuConfig={}),function(){function e(e,t){return Array.prototype.forEach.call(e,t)}var t=window.cdMenuConfig.zenBase||"https://zen.coderdojo.com";window.addEventListener("load",function(){!function(){function t(){c.setAttribute("data-toggle","closed"),i.className="cd-menu__scrim",e(r,function(e){e.setAttribute("data-toggle","closed")})}function n(){c.setAttribute("data-toggle","open"),i.className="cd-menu__scrim cd-menu__scrim--visible"}var o=document.querySelector(".cd-menu__hamburger"),c=document.querySelector("#cd-menu__slidingMenuPrimary"),i=document.querySelector(".cd-menu__scrim"),r=document.querySelectorAll(".cd-menu__slidingMenuSecondary"),u=document.querySelectorAll(".cd-menu__closeButton"),d=document.querySelectorAll(".cd-menu__slidingMenu .cd-menu__content > ul > li > span");o.addEventListener("click",function(){"open"===c.getAttribute("data-toggle")?t():n()}),i.addEventListener("click",t),e(u,function(e){e.addEventListener("click",t)}),e(d,function(e){var t=e.parentElement.querySelector(".cd-menu__slidingMenuSecondary"),n=t.querySelector(".cd-menu__backButton");n&&n.addEventListener("click",function(){t.setAttribute("data-toggle","closed")}),e&&e.addEventListener("click",function(){t.setAttribute("data-toggle","open")})})}(),function(){function t(t){t.target!==n&&t.target.parentElement!==n&&n.setAttribute("data-toggle","closed"),e(o,function(e){t.target!==e&&t.target.parentElement!==e&&t.target.parentElement.parentElement!==e&&e.setAttribute("data-toggle","closed")})}var n=document.querySelector(".cd-menu__desktopNav .cd-menu__profile"),o=document.querySelectorAll(".cd-menu__dropdown");e(o,function(e){e.addEventListener("click",function(){"open"===this.getAttribute("data-toggle")?this.setAttribute("data-toggle","closed"):this.setAttribute("data-toggle","open")})}),document.getElementsByTagName("body")[0].addEventListener("click",t),document.getElementsByTagName("body")[0].addEventListener("touchstart",t)}(),function(){function n(e,t,n,o){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===this.readyState&&200===this.status)try{var e=JSON.parse(this.responseText);n(e)}catch(e){o(e)}else 4===this.readyState&&o(this)},c.open(t?"POST":"GET",e,!0),c.withCredentials=!0,t&&c.setRequestHeader("Content-type","application/json"),c.send(t)}function o(){e(r,function(e){e.style.display="block"})}function c(e,t){var n=document.createElement("li"),o=document.createElement("a");return o.href=t,o.innerText=e,n.appendChild(o),n}var i=[{url:"/dashboard/my-dojos",title:"My Dojos"},{url:"/dashboard/dojos/events/user-events",title:"My Events"}],r=document.querySelectorAll(".cd-menu__account"),u=document.querySelectorAll(".cd-menu__profile"),d=document.querySelectorAll(".cd-menu__profileMenu"),a=document.querySelectorAll(".cd-menu__profileName"),l=document.querySelectorAll(".cd-menu__profileLink"),s=document.querySelectorAll(".cd-menu__profilePic"),m=document.querySelector(".cd-menu__desktopNav .cd-menu__profile");m.addEventListener("click",function(){"open"===this.getAttribute("data-toggle")?this.setAttribute("data-toggle","closed"):this.setAttribute("data-toggle","open")}),n(t+"/api/2.0/users/instance",null,function(r){r&&r.user?(e(a,function(e){e.innerText=r.user.name}),e(l,function(e){e.href=t+"/profile/"+r.user.id}),n(t+"/api/2.0/profiles/user-profile-data",JSON.stringify({query:{userId:r.user.id}}),function(r){n(t+"/api/2.0/profiles/"+r.id+"/avatar",null,function(n){n&&n.imageData&&n.imageInfo&&n.imageInfo.type?(e(s,function(e){e.src="data:"+n.imageInfo.type+";base64,"+n.imageData}),e(d,function(e){i.forEach(function(n){e.appendChild(c(n.title,t+n.url))})}),e(u,function(e){e.style.display="block"})):o()},o)},o)):o()},o)}()})}();